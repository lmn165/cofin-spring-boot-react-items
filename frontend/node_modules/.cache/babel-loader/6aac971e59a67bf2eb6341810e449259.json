{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\ho\\\\cloud\\\\frontend\\\\src\\\\features\\\\user\\\\components\\\\UserLogin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { loginPage } from 'features/user/reducer/userSlice';\nimport { useForm } from 'react-hook-form';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UserLogin() {\n  _s();\n\n  const [login, setLogin] = useState({});\n  const {\n    username,\n    password\n  } = login;\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n\n  const handleChange = e => {\n    const {\n      value,\n      name\n    } = e.target;\n    setLogin({ ...login,\n      [name]: value\n    });\n  };\n\n  const changeNull = ls => {\n    for (const i of ls) {\n      document.getElementById(i).value = '';\n    }\n  };\n\n  const handleClick = async () => {\n    // e.preventDefault()\n    // e.stopPropagation()\n    const loginRequest = {\n      username,\n      password\n    };\n    await dispatch(loginPage(loginRequest));\n    const loginUser = JSON.parse(localStorage.getItem('sessionUser'));\n\n    if (loginUser.username != null) {\n      alert(`${loginUser.name}님 환영합니다`);\n      history.push(\"/users/detail\");\n    } else {\n      alert('아이디, 비번 오류로 로그인 실패  ');\n      changeNull(['username', 'password']);\n    } // alert('로그인정보'+JSON.stringify(loginRequest))\n\n    /*\r\n    userLogin(loginRequest)\r\n    .then(res => {\r\n      const user = res.data;\r\n      if(user.username != null){\r\n        alert('로그인 성공, '+JSON.stringify(res.data))\r\n        localStorage.setItem('sessionUser', JSON.stringify(res.data))\r\n        history.push(\"/detail\")\r\n      }else{\r\n        alert('아이디, 비번 오류로 로그인 실패')\r\n        changeNull(['username', 'password'])\r\n      }\r\n    })\r\n    .catch(err => {\r\n      alert('접속 실패', + err)\r\n      changeNull(['username', 'password'])\r\n    })\r\n    */\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uC720\\uC800 \\uB85C\\uADF8\\uC778\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      method: \"POST\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"id\",\n            children: \"\\uC544\\uC774\\uB514\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"username\",\n            name: \"username\",\n            \"aria-invalid\": errors.username ? \"true\" : \"false\",\n            ...register('username', {\n              required: true,\n              maxLength: 30\n            }),\n            value: username,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 11\n          }, this), errors.username && errors.username.type === \"required\" && /*#__PURE__*/_jsxDEV(Span, {\n            role: \"alert\",\n            children: \"This is required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), errors.username && errors.username.type === \"maxLength\" && /*#__PURE__*/_jsxDEV(Span, {\n            role: \"alert\",\n            children: \"Max length exceeded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"pw\",\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            name: \"password\",\n            \"aria-invalid\": errors.password ? \"true\" : \"false\",\n            ...register('password', {\n              required: true,\n              maxLength: 30\n            }),\n            value: password,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 11\n          }, this), errors.password && errors.password.type === \"required\" && /*#__PURE__*/_jsxDEV(Span, {\n            role: \"alert\",\n            children: \"This is required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), errors.password && errors.password.type === \"maxLength\" && /*#__PURE__*/_jsxDEV(Span, {\n            role: \"alert\",\n            children: \"Max length exceeded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"button\",\n            title: \"\\uB85C\\uADF8\\uC778\",\n            value: \"\\uB85C\\uADF8\\uC778\",\n            onClick: handleSubmit(handleClick)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserLogin, \"YO4Hvi9Vu4WQ76qsBY8zV9tQ8a8=\", false, function () {\n  return [useHistory, useDispatch, useForm];\n});\n\n_c = UserLogin;\nconst Span = styled.span`\n    color: red;\n    font-weight: bold;\n`;\n_c2 = Span;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserLogin\");\n$RefreshReg$(_c2, \"Span\");","map":{"version":3,"sources":["C:/Users/ASUS/ho/cloud/frontend/src/features/user/components/UserLogin.js"],"names":["React","useState","useDispatch","useHistory","loginPage","useForm","styled","UserLogin","login","setLogin","username","password","history","dispatch","register","handleSubmit","formState","errors","handleChange","e","value","name","target","changeNull","ls","i","document","getElementById","handleClick","loginRequest","loginUser","JSON","parse","localStorage","getItem","alert","push","required","maxLength","type","Span","span"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { loginPage } from 'features/user/reducer/userSlice'\r\nimport { useForm } from 'react-hook-form'\r\nimport styled from 'styled-components'\r\n\r\nexport default function UserLogin() {\r\n  const [login, setLogin] = useState({})\r\n  const {username, password} = login\r\n  const history = useHistory()\r\n  const dispatch =useDispatch()\r\n  const { register, handleSubmit, formState: { errors } } = useForm();\r\n\r\n  const handleChange = e => {\r\n    const {value, name} = e.target\r\n    setLogin({\r\n      ...login,\r\n      [name] : value\r\n    })\r\n  }\r\n  const changeNull = ls =>{\r\n    for(const i of ls ){\r\n      document.getElementById(i).value = ''\r\n    }\r\n  }\r\n  const handleClick = async() =>{\r\n    // e.preventDefault()\r\n    // e.stopPropagation()\r\n    const loginRequest = {username, password}\r\n    await dispatch(loginPage(loginRequest))\r\n    const loginUser = JSON.parse(localStorage.getItem('sessionUser'))\r\n    if(loginUser.username != null){\r\n      alert(`${loginUser.name}님 환영합니다`)\r\n      history.push(\"/users/detail\")\r\n    }else{\r\n      alert('아이디, 비번 오류로 로그인 실패  ')\r\n      changeNull(['username','password'])\r\n    }\r\n\r\n    // alert('로그인정보'+JSON.stringify(loginRequest))\r\n    /*\r\n    userLogin(loginRequest)\r\n    .then(res => {\r\n      const user = res.data;\r\n      if(user.username != null){\r\n        alert('로그인 성공, '+JSON.stringify(res.data))\r\n        localStorage.setItem('sessionUser', JSON.stringify(res.data))\r\n        history.push(\"/detail\")\r\n      }else{\r\n        alert('아이디, 비번 오류로 로그인 실패')\r\n        changeNull(['username', 'password'])\r\n      }\r\n    })\r\n    .catch(err => {\r\n      alert('접속 실패', + err)\r\n      changeNull(['username', 'password'])\r\n    })\r\n    */\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>유저 로그인</h1>\r\n      <form method=\"POST\">\r\n        <ul>\r\n          <li><label for=\"id\">아이디</label>\r\n          <input type=\"text\" id=\"username\"\r\n              name=\"username\" \r\n              aria-invalid={errors.username ? \"true\" : \"false\"}\r\n              {...register('username', { required: true, maxLength: 30 })}\r\n              value={username} onChange={handleChange}/>\r\n              {errors.username && errors.username.type === \"required\" && (\r\n                <Span role=\"alert\">This is required</Span>\r\n              )}\r\n              {errors.username && errors.username.type === \"maxLength\" && (\r\n                <Span role=\"alert\">Max length exceeded</Span>\r\n              )}\r\n              </li>\r\n          <li><label for=\"pw\">비밀번호</label>\r\n          <input type=\"password\" id=\"password\" name=\"password\" \r\n          aria-invalid={errors.password ? \"true\" : \"false\"}\r\n          {...register('password', { required: true, maxLength: 30 })}\r\n          value={password} onChange={handleChange}/>\r\n          {errors.password && errors.password.type === \"required\" && (\r\n            <Span role=\"alert\">This is required</Span>\r\n          )}\r\n          {errors.password && errors.password.type === \"maxLength\" && (\r\n            <Span role=\"alert\">Max length exceeded</Span>\r\n          )}\r\n          </li>\r\n          <li><input type=\"button\" title=\"로그인\" value=\"로그인\" onClick={handleSubmit(handleClick)}/></li>\r\n        </ul>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nconst Span = styled.span`\r\n    color: red;\r\n    font-weight: bold;\r\n`"]},"metadata":{},"sourceType":"module"}